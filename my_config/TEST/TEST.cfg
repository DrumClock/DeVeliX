[gcode_macro TEST]
gcode:

  {% if "xyz" not in printer.toolhead.homed_axes %}
    G28   
  {% endif %}  

 {% for nr in range(0, 3 )  %} 

  G92 E0.0
 
;  M117 Layer 3/0.6
  M117 ~layer~ 3 ~hei  Ght~ 0.6
;  G1 X174.243 Y166.743
;TYPE:Peri  Meter
;WIDTH:0.599999
  G1 F2700
  G1 X155.757 Y166.743
  G1 X155.757 Y148.257
  G1 X174.243 Y148.257
  G1 X174.243 Y166.683
  G1 X174.75 Y167.25 F15000
;TYPE:External peri  Meter
;WIDTH:0.499999
  G1 F2430
  G1 X155.25 Y167.25
  G1 X155.25 Y147.75
  G1 X174.75 Y147.75
  G1 X174.75 Y167.19
  G1 X174.364 Y167.146 F15000
  G1 X173.047 Y148.476
;TYPE:Solid infill
;WIDTH:0.525778
  G1 F2700
  G1 X173.809 Y149.238
  G1 X173.809 Y149.921
  G1 X172.579 Y148.691
  G1 X171.896 Y148.691
  G1 X173.809 Y150.604
  G1 X173.809 Y151.286
  G1 X171.214 Y148.691
  G1 X170.531 Y148.691
  G1 X173.809 Y151.969
  G1 X173.809 Y152.652
  G1 X169.848 Y148.691
  G1 X169.165 Y148.691
  G1 X173.809 Y153.335
  G1 X173.809 Y154.018
  G1 X168.482 Y148.691
  G1 X167.799 Y148.691
  G1 X173.809 Y154.701
  G1 X173.809 Y155.384
  G1 X167.116 Y148.691
  G1 X166.433 Y148.691
  G1 X173.809 Y156.067
  G1 X173.809 Y156.749
  G1 X165.751 Y148.691
  G1 X165.068 Y148.691
  G1 X173.809 Y157.432
  G1 X173.809 Y158.115
  G1 X164.385 Y148.691
  G1 X163.702 Y148.691
  G1 X173.809 Y158.798
  G1 X173.809 Y159.481
  G1 X163.019 Y148.691
  G1 X162.336 Y148.691
  G1 X173.809 Y160.164
  G1 X173.809 Y160.847
  M73 P10 R12
  G1 X161.653 Y148.691
  G1 X160.971 Y148.691
  G1 X173.809 Y161.529
  G1 X173.809 Y162.212
  G1 X160.288 Y148.691
  G1 X159.605 Y148.691
  G1 X173.809 Y162.895
  G1 X173.809 Y163.578
  G1 X158.922 Y148.691
  G1 X158.239 Y148.691
  G1 X173.809 Y164.261
  G1 X173.809 Y164.944
  G1 X157.556 Y148.691
  G1 X156.873 Y148.691
  G1 X173.809 Y165.627
  G1 X173.809 Y166.309
  G1 X156.191 Y148.691
  G1 X156.191 Y149.374
  G1 X173.126 Y166.309
  G1 X172.444 Y166.309
  G1 X156.191 Y150.056
  G1 X156.191 Y150.739
  G1 X171.761 Y166.309
  G1 X171.078 Y166.309
  G1 X156.191 Y151.422
  G1 X156.191 Y152.105
  G1 X170.395 Y166.309
  G1 X169.712 Y166.309
  G1 X156.191 Y152.788
  G1 X156.191 Y153.471
  G1 X169.029 Y166.309
  G1 X168.346 Y166.309
  M73 P11 R12
  G1 X156.191 Y154.154
  G1 X156.191 Y154.836
  G1 X167.664 Y166.309
  G1 X166.981 Y166.309
  G1 X156.191 Y155.519
  G1 X156.191 Y156.202
  G1 X166.298 Y166.309
  G1 X165.615 Y166.309
  G1 X156.191 Y156.885
  G1 X156.191 Y157.568
  G1 X164.932 Y166.309
  G1 X164.249 Y166.309
  G1 X156.191 Y158.251
  G1 X156.191 Y158.934
  G1 X163.566 Y166.309
  G1 X162.884 Y166.309
  G1 X156.191 Y159.616
  G1 X156.191 Y160.299
  G1 X162.201 Y166.309
  G1 X161.518 Y166.309
  G1 X156.191 Y160.982
  G1 X156.191 Y161.665
  G1 X160.835 Y166.309
  G1 X160.152 Y166.309
  G1 X156.191 Y162.348
  G1 X156.191 Y163.031
  G1 X159.469 Y166.309
  G1 X158.786 Y166.309
  G1 X156.191 Y163.714
  G1 X156.191 Y164.397
  G1 X158.103 Y166.309
  G1 X157.421 Y166.309
  G1 X156.191 Y165.079
  G1 X156.191 Y165.762
  G1 X156.952 Y166.524
;LAYER_CHAN  GE
;Z:0.8
;HEI  GHT:0.2


  G92 E0.0


;  M117 Layer 4/0.8
  M117 ~layer~ 4 ~hei  Ght~ 0.8
  G1 X174.243 Y166.743
;TYPE:Peri  Meter
;WIDTH:0.599999
  G1 F2700
  G1 X155.757 Y166.743
  G1 X155.757 Y148.257
  G1 X174.243 Y148.257
  G1 X174.243 Y166.683
  G1 X174.75 Y167.25 F15000
;TYPE:External peri  Meter
;WIDTH:0.499999
  G1 F2430
  G1 X155.25 Y167.25
  G1 X155.25 Y147.75
  G1 X174.75 Y147.75
  G1 X174.75 Y167.19
  G1 X174.364 Y167.146 F15000
  M73 P12 R12
  G1 X171.736 Y166.52
;TYPE:Internal infill
;WIDTH:0.6
  G1 F2700
  G1 X173.769 Y164.487
  G1 X173.769 Y159.235
  G1 X166.735 Y166.269
  G1 X161.483 Y166.269
  G1 X173.769 Y153.983
  G1 X173.769 Y148.731
  G1 X156.231 Y166.269
  G1 X156.231 Y161.017
  G1 X168.517 Y148.731
  G1 X163.265 Y148.731
  G1 X156.231 Y155.765
  G1 X156.231 Y150.513
  G1 X158.264 Y148.48
;LAYER_CHAN  GE
;Z:1
;HEI  GHT:0.2


  G92 E0.0


;  M117 Layer 5/1
  M117 ~layer~ 5 ~hei  Ght~ 1
  G1 X174.243 Y166.743
;TYPE:Peri  Meter
;WIDTH:0.599999
  G1 F2700
  G1 X155.757 Y166.743
  G1 X155.757 Y148.257
  G1 X174.243 Y148.257
  G1 X174.243 Y166.683
  G1 X174.75 Y167.25 F15000
;TYPE:External peri  Meter
;WIDTH:0.499999
  G1 F2430
  G1 X155.25 Y167.25
  G1 X155.25 Y147.75
  G1 X174.75 Y147.75
  G1 X174.75 Y167.19
  G1 X174.364 Y167.146 F15000
  G1 X174.02 Y150.764
;TYPE:Internal infill
;WIDTH:0.6
  G1 F2700
  G1 X171.987 Y148.731
  G1 X166.735 Y148.731
  G1 X173.769 Y155.765
  G1 X173.769 Y161.017
  G1 X161.483 Y148.731
  G1 X156.231 Y148.731
  G1 X173.769 Y166.269
  G1 X168.517 Y166.269
  M73 P13 R12
  G1 X156.231 Y153.983
  G1 X156.231 Y159.235
  G1 X163.265 Y166.269
  G1 X158.013 Y166.269
  G1 X155.98 Y164.236
;LAYER_CHAN  GE
;Z:1.2
;HEI  GHT:0.2

 {% endfor %}


[gcode_macro TEST_AREA]
gcode:

  {% if "xyz" not in printer.toolhead.homed_axes %}
     G28   
  {% endif %}  

 G1 x0 Y0 F10000
 G1 x320
 G1 Y320
 G1 X0
 G1 Y0 
 G1 X320 Y320
 G1 X165 Y165 

